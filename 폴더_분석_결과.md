# Company_Data, Company_Data_3, Company_Data_5 폴더 분석 결과

## 1. 각 폴더의 개요

### 1.1 Company_Data

**프로젝트명**: Company Data Collection System  
**버전**: 2.0.0 (5단계 구조)  
**목적**: 노츠 테스팅 견적서/제안서 작성을 위한 기업 정보 수집 시스템

#### 주요 특징
- **5단계 파이프라인 구조**: 기초 정보 생성 → 쿼리 생성 → 상세 정보 검색 → 보고서용 문장 생성 → JSON/HTML 보고서 작성
- **LangChain 기반 LLM Chain 아키텍처**: 각 단계가 독립적인 Chain으로 구현
- **Tavily 검색 API 활용**: 외부 웹 정보 수집
- **ChromaDB 기반 RAG 시스템**: 노츠 회사소개서 슬라이드를 구조화하여 벡터 데이터베이스로 활용
- **단계별 결과 저장**: 각 단계의 결과를 개별 JSON으로 저장하여 추적 가능
- **사용자 승인 시스템**: 1단계 완료 후 기업 정보 확인 및 승인 절차
- **LangSmith 통합**: 토큰 사용량 추적 및 비용 모니터링

#### 기술 스택
- Python 3.11
- LangChain, LangChain-OpenAI
- ChromaDB (벡터 저장소)
- Tavily Search API
- DART API (기업 공시 정보)
- Jinja2 (HTML 템플릿)

#### 주요 디렉토리 구조
```
Company_Data/
├── src/
│   ├── company_info_collector.py    # 메인 5단계 시스템
│   ├── llm/                         # LLM Chain 모듈들
│   │   ├── chains/                  # 5단계 Chain 구현체
│   │   ├── prompts/                 # 각 단계별 프롬프트
│   │   └── tools/                   # 검색 도구들 (Tavily, RAG 등)
│   ├── rag/                         # RAG 시스템
│   └── utils/                       # 유틸리티 모듈들
├── data/
│   ├── structured_slides/           # 구조화된 슬라이드 데이터
│   └── company_info/                # 노츠 회사소개서
├── results/                         # 단계별 결과 JSON 및 HTML 보고서
└── vector_store/                    # ChromaDB 벡터 데이터베이스
```

---

### 1.2 Company_Data_3

**프로젝트명**: Company Data 3  
**목적**: LLM을 활용한 기업 데이터 수집 시스템 (16시간 극한 개발 프로토타입)

#### 주요 특징
- **모듈 기반 아키텍처**: MainController 중심의 모듈 구조
- **DuckDuckGo 검색 엔진 사용**: 웹 검색을 위한 DuckDuckGo API 활용
- **단순화된 구조**: 빠른 프로토타입 개발을 위한 간결한 설계
- **Rich CLI 인터페이스**: 사용자 친화적인 콘솔 출력
- **HTML 보고서 생성**: 수집된 정보를 HTML 형식으로 제공
- **지연 로딩(Lazy Loading)**: 모듈들을 필요 시점에 로드하여 메모리 효율성 향상

#### 기술 스택
- Python 3.11.9
- LangChain
- DuckDuckGo Search (ddgs)
- BeautifulSoup4, lxml (웹 스크래핑)
- Rich (CLI 인터페이스)
- Jinja2 (HTML 템플릿)

#### 주요 디렉토리 구조
```
Company_Data_3/
├── modules/                         # 핵심 기능 모듈
│   ├── main_controller.py           # 메인 시스템 컨트롤러
│   ├── company_info.py              # 기업 정보 수집
│   ├── rag_module.py                # RAG 모듈
│   ├── search_strategy.py           # 검색 전략
│   ├── data_collection.py           # 데이터 수집
│   ├── analysis.py                  # 분석 모듈
│   ├── report_generator.py          # 보고서 생성
│   └── dart_tool.py                 # DART 도구
├── config/                          # 설정 파일
├── data/
│   ├── opendart/                    # DART 데이터
│   ├── structured_slides/           # 구조화된 슬라이드
│   └── chroma_db/                   # ChromaDB 데이터
├── result/                          # 결과 파일 (JSON, HTML)
└── templates/                       # HTML 템플릿
```

---

### 1.3 Company_Data_5

**프로젝트명**: Company Data 5 - 기업 정보 자동 수집 및 인사이트 제공 시스템  
**목적**: QA/테스트 업계 특화 LLM 기반 기업 정보 자동 수집 및 인사이트 제공 시스템

#### 주요 특징
- **LLM Agent 기반 아키텍처**: 전문 에이전트들의 Function-calling 기반 협업
- **에이전트 레지스트리 시스템**: 자동 에이전트 발견 및 의존성 추적
- **RAG 라우팅 시스템**: Notes RAG와 Slides RAG로 분리된 벡터 저장소
- **워크플로우 엔진**: 에이전트 간 통신 및 상태 관리
- **Phase별 단계적 개발**: 5단계로 나뉜 체계적인 개발 프로세스 (현재 Phase 4 진행 중)
- **프로젝트 관리 시스템**: Progress Board와 Tasks.md를 통한 실시간 진행 상황 추적
- **고도화된 RAG 시스템**: ETL 파이프라인, 라우팅 엔진, 하이브리드 검색 지원

#### 기술 스택
- Python 3.11.9
- OpenAI GPT (Function-calling)
- ChromaDB, FAISS (벡터 저장소)
- DuckDuckGo Search (ddgs)
- Structlog (구조화된 로깅)
- Rich (CLI 인터페이스)
- Pydantic (데이터 검증)

#### 주요 디렉토리 구조
```
Company_Data_5/
├── src/
│   ├── agents/                      # LLM 에이전트들
│   │   ├── main/                   # Main Agent (중앙 제어)
│   │   ├── basic_info/             # Basic Info Agent
│   │   ├── planner/                # Search Planning Agent
│   │   ├── search/                 # Search Agents (SAR, SAW)
│   │   ├── insight/                # Make Insight Agent
│   │   └── report/                 # Make Report Agent
│   ├── rag/                        # RAG 시스템
│   │   ├── etl/                    # ETL 파이프라인
│   │   ├── routing/                # RAG 라우팅 엔진
│   │   └── search/                 # 검색 엔진
│   ├── registry/                   # 에이전트 레지스트리
│   └── shared/                     # 공통 모듈
│       ├── core/                   # 기본 에이전트/툴 클래스
│       ├── models/                 # 데이터 모델
│       └── utils/                  # 유틸리티
├── config/                         # 설정 파일 (JSON, YAML)
├── data/
│   ├── opendart/                   # DART 데이터
│   ├── slides/                     # 슬라이드 JSON 데이터
│   └── vector_db/                  # 벡터 데이터베이스 인덱스
├── docs/                           # 문서 (Phase별 상세 계획)
│   ├── progress_board.md           # 진행 상황 대시보드
│   └── phase*/                     # Phase별 설계 문서
└── output/                         # 출력 파일
```

---

## 2. 공통점

### 2.1 목적 및 사용 사례
- **동일한 목적**: 모든 프로젝트가 노츠 테스팅 회사의 영업 담당자를 위한 기업 정보 자동 수집 시스템
- **동일한 입력**: 기업명을 입력받아 기업 정보를 수집
- **동일한 출력**: JSON 및 HTML 형식의 보고서 생성

### 2.2 데이터 소스
- **DART API**: 기업 공시 정보 수집 (corpCode.xml, 기업개황 조회)
- **노츠 회사소개서 슬라이드**: 구조화된 JSON 파일로 제공되는 내부 지식베이스
- **한국표준산업분류(11차)표**: 업종 분류 및 매핑에 활용
- **RAG 시스템**: 벡터 데이터베이스를 활용한 의미 기반 검색

### 2.3 기술 스택 공통점
- **Python 3.11+**: 모든 프로젝트가 Python 3.11 이상 사용
- **LangChain**: LLM 통합 및 체인 구성 (Company_Data, Company_Data_3)
- **ChromaDB**: 벡터 저장소로 활용
- **Jinja2**: HTML 보고서 템플릿 생성
- **DuckDuckGo Search**: 웹 검색 (Company_Data_3, Company_Data_5)

### 2.4 기능 공통점
- **기업 기본 정보 수집**: DART API를 통한 기업개황 조회
- **웹 검색 통합**: 외부 정보 수집을 위한 웹 검색 기능
- **RAG 기반 검색**: 내부 지식베이스와 외부 정보의 융합
- **HTML 보고서 생성**: 수집된 정보를 시각적으로 정리한 보고서
- **JSON 결과 저장**: 구조화된 데이터를 JSON 형식으로 저장

### 2.5 프로젝트 구조 공통점
- **data/ 폴더**: 입력 데이터 저장 (DART 데이터, 슬라이드 JSON, 업종 분류표)
- **결과 저장 폴더**: 수집된 결과를 저장하는 전용 디렉토리 (results/, result/, output/)
- **설정 파일**: 환경변수 및 API 키 관리 (user.env, env.user)
- **문서 폴더**: 프로젝트 문서 및 설계서 (docs/)

---

## 3. 차이점

### 3.1 아키텍처 패러다임

| 항목 | Company_Data | Company_Data_3 | Company_Data_5 |
|------|--------------|----------------|----------------|
| **아키텍처** | LLM Chain 기반 (5단계 파이프라인) | 모듈 기반 (MainController 중심) | LLM Agent 기반 (Function-calling) |
| **설계 철학** | 단계별 순차 처리 | 모듈 간 협업 | 에이전트 간 협업 |
| **확장성** | 중간 (Chain 추가 필요) | 낮음 (프로토타입) | 높음 (에이전트 추가) |

#### Company_Data
- **Chain 기반**: LangChain의 Chain을 활용한 순차적 파이프라인
- **5단계 고정 구조**: 각 단계가 명확히 정의된 입력/출력
- **단계별 결과 저장**: 각 단계의 결과를 개별 JSON으로 저장

#### Company_Data_3
- **모듈 기반**: MainController가 모듈들을 조정하는 구조
- **지연 로딩**: 필요 시점에 모듈 로드
- **단순화된 구조**: 빠른 프로토타입 개발에 최적화

#### Company_Data_5
- **Agent 기반**: 각 에이전트가 독립적인 기능 수행
- **Function-calling**: 에이전트 간 표준화된 인터페이스
- **레지스트리 시스템**: 자동 에이전트 발견 및 의존성 관리

### 3.2 검색 엔진 및 도구

| 항목 | Company_Data | Company_Data_3 | Company_Data_5 |
|------|--------------|----------------|----------------|
| **웹 검색** | Tavily Search API | DuckDuckGo Search (ddgs) | DuckDuckGo Search (ddgs) |
| **RAG 구조** | 단일 RAG (Slides) | 단일 RAG (Slides) | 이중 RAG (Notes + Slides) |
| **라우팅** | 없음 | 없음 | 메타데이터 기반 라우팅 |

#### Company_Data
- **Tavily API**: 유료 검색 API 사용
- **단일 RAG**: 노츠 회사소개서 슬라이드만 포함

#### Company_Data_3
- **DuckDuckGo**: 무료 웹 검색 엔진
- **단일 RAG**: 슬라이드 데이터만 포함

#### Company_Data_5
- **DuckDuckGo**: 무료 웹 검색 엔진
- **이중 RAG**: Notes RAG (SPA, MIA용) + Slides RAG (SAR용)
- **라우팅 엔진**: 메타데이터 기반 자동 분류

### 3.3 LLM 통합 방식

| 항목 | Company_Data | Company_Data_3 | Company_Data_5 |
|------|--------------|----------------|----------------|
| **LLM 프레임워크** | LangChain | LangChain | OpenAI 직접 (Function-calling) |
| **프롬프트 관리** | prompts/ 폴더에 분리 | 모듈 내부에 포함 | 에이전트별로 분리 |
| **Function-calling** | LangChain Tools | 없음 | 에이전트별 Tool 정의 |

#### Company_Data
- **LangChain Chain**: 각 단계별 Chain 구현
- **프롬프트 분리**: prompts/ 폴더에 체계적으로 관리
- **Tool 통합**: LangChain의 Tool 인터페이스 사용

#### Company_Data_3
- **LangChain LLM**: 기본 LLM 래퍼 사용
- **프롬프트 포함**: 각 모듈 내부에 프롬프트 포함
- **도구 통합**: 모듈 메서드로 구현

#### Company_Data_5
- **OpenAI 직접**: Function-calling을 직접 활용
- **에이전트별 Tool**: 각 에이전트가 고유한 Tool 세트 보유
- **표준화된 스키마**: 모든 Tool이 공통 스키마 준수

### 3.4 프로젝트 관리 및 문서화

| 항목 | Company_Data | Company_Data_3 | Company_Data_5 |
|------|--------------|----------------|----------------|
| **문서화 수준** | 중간 (docs/specs, docs/step_docs) | 낮음 (README 비어있음) | 매우 높음 (Phase별 상세 문서) |
| **진행 관리** | 단계별 문서 | 없음 | Progress Board + Tasks.md |
| **설계 문서** | requirements.md, design.md | 없음 | Phase별 design.md |

#### Company_Data
- **단계별 문서**: 각 단계별 구현 문서 (step_docs/)
- **요구사항 문서**: 상세한 요구사항 정의
- **설계 문서**: 시스템 설계 문서 포함

#### Company_Data_3
- **최소 문서화**: README 파일이 비어있음
- **프로토타입 특성**: 빠른 개발에 집중
- **RUNTIME_FIXES.md**: 런타임 수정 사항 기록

#### Company_Data_5
- **체계적 문서화**: Phase별 상세 설계 및 작업 문서
- **Progress Board**: 실시간 진행 상황 대시보드
- **작업 관리**: 체계적인 워크플로우 (9단계 루틴)
- **자동 업데이트**: 매 실행 단계마다 상태 반영

### 3.5 테스트 및 품질 관리

| 항목 | Company_Data | Company_Data_3 | Company_Data_5 |
|------|--------------|----------------|----------------|
| **테스트 구조** | 없음 | tests/ 폴더 존재 | tests/ 폴더 (단위/통합/성능) |
| **테스트 커버리지** | 없음 | 부분적 | 체계적 (16개 테스트 파일) |
| **성능 모니터링** | LangSmith | 없음 | 성능 테스트 포함 |

#### Company_Data
- **LangSmith 통합**: 토큰 사용량 및 비용 추적
- **테스트 코드 없음**: 테스트 구조 미구현

#### Company_Data_3
- **기본 테스트**: tests/ 폴더에 일부 테스트 파일
- **통합 테스트**: test_integration_*.py 파일들
- **템플릿 테스트**: HTML 템플릿 검증

#### Company_Data_5
- **체계적 테스트**: 단위, 통합, 성능 테스트 분리
- **높은 커버리지**: 16개 테스트 파일로 주요 기능 검증
- **성능 측정**: Phase 2 빠른 테스트로 성능 모니터링

### 3.6 데이터 처리 및 저장

| 항목 | Company_Data | Company_Data_3 | Company_Data_5 |
|------|--------------|----------------|----------------|
| **결과 저장 위치** | results/prompts/, results/reports/ | result/ | output/json/, output/rag/ |
| **단계별 저장** | 각 단계별 개별 JSON | 통합 JSON + HTML | 단일 누적 JSON |
| **로그 관리** | logs/ 폴더 | log/ 폴더 | output/logs/ (구조화된 로그) |

#### Company_Data
- **단계별 분리 저장**: 각 단계의 결과를 개별 파일로 저장
- **프롬프트 기록**: prompts/ 하위에 단계별 결과 저장
- **타임스탬프 기반**: 각 실행마다 타임스탬프 포함

#### Company_Data_3
- **통합 저장**: 단일 JSON 파일로 통합
- **HTML 보고서**: 검색 결과와 함께 HTML 생성
- **디스클로저 저장**: ZIP 파일로 압축 저장

#### Company_Data_5
- **누적 저장**: 단일 JSON 파일에 모든 단계 누적
- **구조화된 출력**: json/, rag/, logs/ 등으로 분리
- **인덱스 관리**: vector_db/index_state.json으로 상태 추적

### 3.7 에러 처리 및 로깅

| 항목 | Company_Data | Company_Data | Company_Data_5 |
|------|--------------|--------------|----------------|
| **로깅 프레임워크** | 기본 logging | Rich Handler | Structlog (구조화) |
| **에러 처리** | 기본 예외 처리 | ErrorHandler 클래스 | RetryManager, ValidationUtils |
| **로깅 수준** | 파일 기반 | 콘솔 중심 (Rich) | 파일 + 콘솔 (구조화) |

#### Company_Data
- **파일 로깅**: logs/ 폴더에 타임스탬프 기반 로그
- **기본 예외 처리**: try-except 블록 활용

#### Company_Data_3
- **Rich 로깅**: 콘솔에 시각적으로 표시
- **ErrorHandler**: 중앙화된 에러 처리 클래스
- **ProgressTracker**: 진행 상황 추적

#### Company_Data_5
- **구조화된 로깅**: Structlog로 JSON 형식 로그
- **로그 분리**: agents.log, errors.log, tools.log 등
- **재시도 관리**: RetryManager로 자동 재시도
- **검증 유틸리티**: ValidationUtils로 데이터 검증

### 3.8 설정 관리

| 항목 | Company_Data | Company_Data_3 | Company_Data_5 |
|------|--------------|----------------|----------------|
| **설정 파일** | user.env | env.user | env.user |
| **설정 관리** | 환경변수만 | Settings 클래스 | ConfigManager + JSON/YAML |
| **설정 검증** | 없음 | validate_setup() | Pydantic 스키마 검증 |

#### Company_Data
- **환경변수 중심**: .env 파일 기반
- **템플릿 제공**: user.env.template

#### Company_Data_3
- **Settings 클래스**: 중앙화된 설정 관리
- **설정 검증**: validate_setup() 메서드

#### Company_Data_5
- **ConfigManager**: 중앙화된 설정 관리자
- **JSON/YAML 설정**: config/ 폴더에 정책 파일들
  - rag_routing.json: RAG 라우팅 규칙
  - search_policy.json: 검색 정책
  - spa_strategy.json: 전략 설정
- **Pydantic 검증**: schemas.py로 데이터 검증

---

## 4. 종합 비교 요약

### 4.1 성숙도 및 발전 단계

1. **Company_Data_3**: 프로토타입 단계
   - 빠른 개발에 집중
   - 최소한의 기능 구현
   - 문서화 부족

2. **Company_Data**: 중간 단계
   - 체계적인 5단계 파이프라인
   - LangChain 기반 구조화
   - 기본 문서화 완료

3. **Company_Data_5**: 가장 성숙한 단계
   - Agent 기반 아키텍처
   - 체계적인 프로젝트 관리
   - 높은 테스트 커버리지
   - 상세한 문서화

### 4.2 추천 사용 시나리오

- **Company_Data_3**: 빠른 프로토타입이나 간단한 개념 검증
- **Company_Data**: 안정적인 5단계 파이프라인이 필요한 경우, LangChain 생태계 활용
- **Company_Data_5**: 확장 가능하고 유지보수가 용이한 프로덕션 시스템 구축

### 4.3 기술적 진화 경로

```
Company_Data_3 (프로토타입)
    ↓
Company_Data (Chain 기반 구조화)
    ↓
Company_Data_5 (Agent 기반 고도화)
```

각 버전은 이전 버전의 한계를 해결하고 더 나은 아키텍처로 발전한 것으로 보입니다.

---

**작성일**: 2025-01-XX  
**작성자**: AI Assistant  
**분석 대상**: Company_Data, Company_Data_3, Company_Data_5 폴더

